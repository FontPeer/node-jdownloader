<!DOCTYPE html>  <html> <head>   <title>jdownloader.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               jdownloader.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p><strong>node-jdownloader</strong> is a no-frills api for driving JDownloader through its
RemoteControl's plugin HTTP Api. It parses the returned results from XML
to idiomatic Javascript structures.</p>

<p>The <a href="http://github.com/mathieuravaux/node-jdownloader">source for node-jdownloader</a>
is available on GitHub and released under the MIT license.</p>

<p>To install node-jdownloader, first make sure you have <a href="http://nodejs.org/">Node.js</a>,
Then, with NPM:</p>

<pre><code>sudo npm install node-jdownloader
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h3>External dependencies.</h3>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">request = </span><span class="nx">require</span> <span class="s1">&#39;request&#39;</span>
<span class="nv">_ = </span><span class="nx">require</span><span class="p">(</span><span class="s1">&#39;underscore&#39;</span><span class="p">).</span><span class="nx">_</span>
<span class="nv">ltx = </span><span class="nx">require</span> <span class="s1">&#39;ltx&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <h3>Helper methods</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Parses the given xml into nested hashes using <code>ltx</code>.
If an exception arises, the error callback is called, and null is sent back
TODO: change this to fit better in the (err, callback) chain</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">parse_xml = </span><span class="nf">(xml, callback) -&gt;</span>
  <span class="k">try</span> <span class="nx">ltx</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">xml</span><span class="p">)</span>
  <span class="k">catch</span> <span class="nx">err</span>
    <span class="nx">callback</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
    <span class="kc">null</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>The main class</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">Client</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Use the default JDownloader configuration</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">constructor: </span><span class="nf">(host = &quot;localhost&quot;, port = 10025) -&gt;</span>
    <span class="vi">@server_url = </span><span class="s2">&quot;http://#{host}:#{port}/&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <h3>API methods generators:</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Creates a function that fetches given <code>path</code>, optionally transforming the result
through <code>async_filter</code> if successful</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@get: </span><span class="nf">(path, async_filter) -&gt;</span>
    <span class="nf">(cb) -&gt;</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;No callback passed !&quot;</span><span class="p">)</span> <span class="nx">unless</span> <span class="nx">cb</span>
      <span class="nx">@request</span> <span class="nx">path</span><span class="p">,</span> <span class="nf">(err, resp) -&gt;</span>
        <span class="k">return</span> <span class="nx">cb</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">if</span> <span class="nx">err</span>
        <span class="k">if</span> <span class="nx">async_filter</span>
          <span class="nx">async_filter</span><span class="p">(</span><span class="nx">resp</span><span class="p">,</span> <span class="nx">cb</span><span class="p">)</span>
        <span class="k">else</span>
          <span class="nx">cb</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">resp</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>For configuration flags, generate 3 convenience functions. E.g.: for 'reconnect'</p>

<pre><code>set_reconnect_enabled(true|false, callback)
enable_reconnect(callback)
disable_reconnect(callback)
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@feature_switch = </span><span class="nf">(feature, path) -&gt;</span>
    <span class="nv">switch_fn = </span><span class="nf">(enable, callback) -&gt;</span> <span class="nx">@request</span> <span class="s2">&quot;#{path}#{!!enable}&quot;</span><span class="p">,</span> <span class="nx">callback</span>
    <span class="nx">@prototype</span><span class="p">[</span><span class="s2">&quot;set_#{feature}_enabled&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">switch_fn</span>
    <span class="nx">@prototype</span><span class="p">[</span><span class="s2">&quot;enable_#{feature}&quot;</span><span class="p">]</span>  <span class="o">=</span> <span class="nf">(callback) -&gt;</span> <span class="nx">switch_fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kc">yes</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span>
    <span class="nx">@prototype</span><span class="p">[</span><span class="s2">&quot;disable_#{feature}&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nf">(callback) -&gt;</span> <span class="nx">switch_fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kc">no</span><span class="p">,</span>  <span class="nx">callback</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <h3>Parsers for the server response contents</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>String -> Number</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@as_number: </span><span class="nf">(value, callback) -&gt;</span> <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>String -> Boolean</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@as_boolean: </span><span class="nf">(value, callback) -&gt;</span>
    <span class="nv">value = </span><span class="k">switch</span> <span class="nx">value</span>
      <span class="k">when</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span>  <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;on&#39;</span><span class="p">,</span>  <span class="s1">&#39;yes&#39;</span> <span class="k">then</span> <span class="kc">true</span>
      <span class="k">when</span> <span class="s1">&#39;false&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;off&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span>  <span class="k">then</span> <span class="kc">false</span>
      <span class="k">else</span> <span class="nx">value</span>
    <span class="nx">callback</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">value</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Filter to reject the whitespace XML text nodes</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">whitespace_nodes = </span><span class="nf">(el) -&gt;</span> <span class="k">typeof</span> <span class="nx">el</span> <span class="o">==</span> <span class="s1">&#39;string&#39;</span> <span class="o">&amp;&amp;</span> <span class="sr">/\s+/</span><span class="p">.</span><span class="nx">test</span> <span class="nx">el</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Remove the prefix for hashes like:</p>

<pre><code>{
  package_size: '500 MiB',
  package_url:  '....',
  package_status: 'RUNNING',
  ...
}
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">hash_prefix_remover = </span><span class="nf">(prefix) -&gt;</span> <span class="nf">(cumbersome_hash) -&gt;</span>
    <span class="nv">injector = </span><span class="nf">(hash, value, key) -&gt;</span>
      <span class="nx">hash</span><span class="p">[</span><span class="nx">key</span><span class="p">.</span><span class="nx">replace</span> <span class="nx">prefix</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span>
      <span class="nx">hash</span>
    <span class="nx">_</span><span class="p">(</span><span class="nx">cumbersome_hash</span><span class="p">).</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">injector</span><span class="p">,</span> <span class="p">{})</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>XML 'configuration' nodes -> 'Configuration' Hash</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@parse_configuration = </span><span class="nf">(xml, callback) -&gt;</span>
    <span class="nv">root = </span><span class="nx">parse_xml</span> <span class="nx">xml</span><span class="p">,</span> <span class="nx">callback</span>
    <span class="k">return</span> <span class="nx">unless</span> <span class="nx">root</span>
    <span class="nv">config = </span><span class="nx">_</span><span class="p">(</span><span class="nx">root</span><span class="p">.</span><span class="nx">children</span><span class="p">).</span><span class="nx">detect</span><span class="p">(</span> <span class="nf">(el) -&gt;</span> <span class="k">typeof</span> <span class="nx">el</span> <span class="o">!=</span> <span class="s1">&#39;string&#39;</span><span class="p">).</span><span class="nx">attrs</span>
    <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">config</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>XML 'package' nodes -> Array of 'Package' Hashes</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="vi">@parse_downloads = </span><span class="nf">(xml, callback) -&gt;</span>
    <span class="nv">root = </span><span class="nx">parse_xml</span> <span class="nx">xml</span><span class="p">,</span> <span class="nx">callback</span>
    <span class="k">return</span> <span class="nx">unless</span> <span class="nx">root</span>
    <span class="nv">packages = </span><span class="nx">_</span><span class="p">(</span><span class="nx">root</span><span class="p">.</span><span class="nx">children</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">chain</span><span class="p">()</span>
      <span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">whitespace_nodes</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">pluck</span><span class="p">(</span><span class="s1">&#39;attrs&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">hash_prefix_remover</span> <span class="sr">/^package_/</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">value</span><span class="p">()</span>
    <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">packages</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>XML 'link' nodes -></p>

<pre><code>[{
  url: 'http://ww...1/ubuntu-10.04.1_5in1.part1.rar' },
  files: [{
    size: '500.00 MiB',
    browser_url: 'http://ww...1/ubuntu-10.04.1_5in1.part1.rar',
    package: 'ubuntu-10 04 1 5in1',
    hoster: 'filesonic.com',
status: '',
    name: 'ubuntu-10.04.1_5in1.part1.rar',
    download_url: 'http://ww...1/ubuntu-10.04.1_5in1.part1.rar',
    available: 'TRUE'
  }]
}]
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">parse_link_analysis = </span><span class="nf">(xml, callback) -&gt;</span>
    <span class="nv">root = </span><span class="nx">parse_xml</span> <span class="nx">xml</span><span class="p">,</span> <span class="nx">callback</span>
    <span class="k">return</span> <span class="nx">unless</span> <span class="nx">root</span> <span class="c1">#TODO: change this to keep the normal control flow</span>
    <span class="nv">adapt_link_nodes = </span><span class="nf">(link_node) -&gt;</span>
      <span class="nv">link = </span><span class="nx">link_node</span><span class="p">.</span><span class="nx">attrs</span>
      <span class="nv">link.files = </span><span class="nx">_</span><span class="p">(</span><span class="nx">link_node</span><span class="p">.</span><span class="nx">children</span><span class="p">).</span><span class="nx">chain</span><span class="p">()</span>
        <span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">whitespace_nodes</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">pluck</span><span class="p">(</span><span class="s1">&#39;attrs&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">hash_prefix_remover</span> <span class="sr">/^file_/</span><span class="p">).</span><span class="nx">value</span><span class="p">()</span>
      <span class="nx">link</span>
    <span class="nv">results = </span><span class="nx">_</span><span class="p">(</span><span class="nx">root</span><span class="p">.</span><span class="nx">children</span><span class="p">).</span><span class="nx">chain</span><span class="p">()</span>
      <span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">whitespace_nodes</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">adapt_link_nodes</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">value</span><span class="p">()</span>
    <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">results</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <h1>General information API</h1>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>RemoteControl API html help</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">help: </span>              <span class="nx">@get</span> <span class="s1">&#39;help&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>IP of the machine hosting JDownloader</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">ip: </span>                <span class="nx">@get</span> <span class="s1">&#39;get/ip&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>current download speed</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">current_speed: </span>     <span class="nx">@get</span> <span class="s1">&#39;get/speed&#39;</span><span class="p">,</span> <span class="nx">@as_number</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>JDownloader configuration, parsed as a Hash</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">config: </span>            <span class="nx">@get</span> <span class="s1">&#39;get/config&#39;</span><span class="p">,</span> <span class="nx">@parse_configuration</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>JDownloader version string</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">version: </span>           <span class="nx">@get</span> <span class="s1">&#39;get/version&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>JDownloader's RemoteControl plugin version string</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">rc_version: </span>        <span class="nx">@get</span> <span class="s1">&#39;get/rcversion&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Download speed limit</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">get_speedlimit: </span>    <span class="nx">@get</span> <span class="s1">&#39;get/speedlimit&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>Autoreconnect flag (for dial-up style Internet connections ?)</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">get_autoreconnect: </span> <span class="nx">@get</span> <span class="s1">&#39;get/isreconnect&#39;</span><span class="p">,</span> <span class="nx">@as_boolean</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Download status: RUNNING, NOT_RUNNING or STOPPING</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">download_status: </span>   <span class="nx">@get</span> <span class="s1">&#39;get/downloadstatus&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <h1>Downloads management API</h1>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>Manage the status of the download list at once</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">start_downloads: </span>   <span class="nx">@get</span> <span class="s1">&#39;action/start&#39;</span>
  <span class="nv">pause_downloads: </span>   <span class="nx">@get</span> <span class="s1">&#39;action/pause&#39;</span>
  <span class="nv">stop_downloads: </span>    <span class="nx">@get</span> <span class="s1">&#39;action/stop&#39;</span>
  <span class="nv">toggle_downloads: </span>  <span class="nx">@get</span> <span class="s1">&#39;action/toggle&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>Get the current, finished and total downloads count</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">current_downloads_count: </span> <span class="nx">@get</span> <span class="s1">&#39;get/downloads/current/count&#39;</span><span class="p">,</span>  <span class="nx">@as_number</span>
  <span class="nv">finished_downloads_count: </span><span class="nx">@get</span> <span class="s1">&#39;get/downloads/finished/count&#39;</span><span class="p">,</span> <span class="nx">@as_number</span>
  <span class="nv">downloads_count: </span>         <span class="nx">@get</span> <span class="s1">&#39;get/downloads/all/count&#39;</span><span class="p">,</span>      <span class="nx">@as_number</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Get the current, finished and full downloads list</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">current_downloads_list: </span> <span class="nx">@get</span> <span class="s1">&#39;get/downloads/current/list&#39;</span><span class="p">,</span>    <span class="nx">@parse_downloads</span>
  <span class="nv">finished_downloads_list: </span><span class="nx">@get</span> <span class="s1">&#39;get/downloads/finished/list&#39;</span><span class="p">,</span>   <span class="nx">@parse_downloads</span>
  <span class="nv">downloads_list: </span>         <span class="nx">@get</span> <span class="s1">&#39;get/downloads/all/list&#39;</span><span class="p">,</span>        <span class="nx">@parse_downloads</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>Check a list of links WITHOUT downloading them.
Useful to guess the 'feasibility' of a download</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">check_links: </span><span class="nf">(links, cb) -&gt;</span>
    <span class="nv">links_list = </span><span class="nx">links</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;\n&#39;</span><span class="p">)</span>
    <span class="nv">path = </span><span class="s2">&quot;special/check/#{encodeURI links_list}&quot;</span>
    <span class="nx">@request</span> <span class="nx">path</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">resp</span><span class="p">)</span> <span class="o">=&gt;</span>
      <span class="k">return</span> <span class="nx">cb</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">if</span> <span class="nx">err</span>
      <span class="nx">parse_link_analysis</span> <span class="nx">resp</span><span class="p">,</span> <span class="nx">cb</span></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>Add a set of links to the linkgrabber. This may need user interaction in
JDownloader, depending on its configuration.
See <a href="#section-9">automatic downloads configuration</a></p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">add_downloads: </span><span class="nf">(links, cb) -&gt;</span>
    <span class="nv">links_list = </span><span class="nx">links</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;\n&#39;</span><span class="p">)</span>
    <span class="nv">path = </span><span class="s2">&quot;action/add/links/#{encodeURI links_list}&quot;</span>
    <span class="nx">@request</span> <span class="nx">path</span><span class="p">,</span> <span class="nx">cb</span></pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>Remove all downloads from any list</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">purge_downloads: </span><span class="nx">@get</span> <span class="s1">&#39;action/downloads/removeall&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>Remove a list of downloads based on their package name</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">remove_downloads: </span><span class="nf">(package_names, cb) -&gt;</span>
    <span class="nv">package_names = </span><span class="nx">package_names</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
    <span class="nv">path = </span><span class="s2">&quot;action/downloads/remove/#{escape package_names}&quot;</span>
    <span class="nx">@request</span> <span class="nx">path</span><span class="p">,</span> <span class="nx">cb</span></pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <h1>JDownloader management API</h1>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p>Trigger the automatic update. <code>force</code> if you're willing to install updates
that need a restart of JDownloader</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">webupdate: </span><span class="nx">@get</span> <span class="s1">&#39;action/update&#39;</span>
  <span class="nv">force_webupdate: </span><span class="nx">@get</span> <span class="s1">&#39;action/forceupdate&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p>Reconnects, shutdown, restart JDownloader</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">reconnect: </span><span class="nx">@get</span> <span class="s1">&#39;action/reconnect&#39;</span>
  <span class="nv">restart: </span>  <span class="nx">@get</span> <span class="s1">&#39;action/restart&#39;</span>
  <span class="nv">shutdown: </span> <span class="nx">@get</span> <span class="s1">&#39;action/shutdown&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <p>Manage the download speed limit
TODO</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">set_speedlimit: </span><span class="nf">(new_limit, callback) -&gt;</span>
    <span class="s2">&quot;action/set/download/limit/#{new_limit}&quot;</span>

  <span class="nv">remove_speedlimit: </span><span class="nf">(callback) -&gt;</span> <span class="nx">set_speedlimit</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">callback</span></pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <p>Manage the maximum number of simulaneous downloads
TODO:</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">set_max_downloads: </span><span class="nf">(count, callback) -&gt;</span>
    <span class="s2">&quot;action/set/download/max/#{count}&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p>Destination directory for the downloads</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">set_download_dir: </span><span class="nf">(directory, callback) -&gt;</span>
    <span class="nx">@request</span> <span class="s2">&quot;action/set/downloaddir/general/#{escape directory}&quot;</span><span class="p">,</span> <span class="nx">callback</span></pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <h3>automatic download configuration</h3>

<p>Wether added links are automatically accepted in the linkgrabber</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">@feature_switch</span> <span class="s1">&#39;grabber_autoadding&#39;</span><span class="p">,</span> <span class="s2">&quot;set/grabber/autoadding/&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <p>Weher added links are automatically started once in the download list</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">@feature_switch</span> <span class="s1">&#39;grabber_startafteradding&#39;</span><span class="p">,</span> <span class="s2">&quot;set/grabber/startafteradding/&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <p>Set the 'reconnect enabled', 'premium enabled' options of JDowndloader</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">@feature_switch</span> <span class="s1">&#39;reconnect&#39;</span><span class="p">,</span> <span class="s1">&#39;action/set/reconnect/&#39;</span>
  <span class="nx">@feature_switch</span> <span class="s1">&#39;premium&#39;</span><span class="p">,</span> <span class="s1">&#39;action/set/premiumenabled/&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-45">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-45">&#182;</a>               </div>               <h3>Helpers</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-46">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-46">&#182;</a>               </div>               <p>The common idiom of making an asynchronous GET on the server</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">request: </span><span class="nf">(path, callback) -&gt;</span>
    <span class="nx">request</span>
      <span class="nv">uri: </span><span class="nx">@server_url</span> <span class="o">+</span> <span class="nx">path</span>
      <span class="nv">callback: </span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="o">=&gt;</span>
        <span class="k">if</span> <span class="nx">error</span>
          <span class="nv">error.response = </span><span class="nx">response</span>
          <span class="nv">error.body = </span><span class="nx">body</span>
          <span class="nx">callback</span> <span class="nx">error</span>
        <span class="k">else</span>
          <span class="nx">callback</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">body</span><span class="p">,</span> <span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span>

<span class="nv">exports.Client = </span><span class="nx">Client</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 